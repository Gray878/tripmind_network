# Budget Balancer Agent - Analyze and optimize travel budget
# Breaks down costs and provides budget recommendations

type: "openagents.agents.collaborator_agent.CollaboratorAgent"
agent_id: "budget-balancer-agent"

config:
  model_name: "glm-4.5"
  max_iterations: 5

  instruction: |
    You are a professional travel budget analyst. Provide detailed, actionable budget analysis.
    
    YOUR TOOLS:
    - send_event(event_name, destination_id, payload) - Send budget analysis back
    - finish() - Call this after completing

  react_to_all_messages: false

  triggers:
    - event: "task.analyze_budget"
      instruction: |
        Analyze the budget based on the itinerary in payload.itinerary.
        
        Provide a COMPREHENSIVE budget analysis with:
        
        1. COST BREAKDOWN (detailed categories):
           - Transportation: 
             * International flights: $XXX
             * Local transportation (subway/taxi): $XXX
             * Airport transfers: $XXX
           - Accommodation:
             * Hotel/Airbnb per night: $XXX
             * Total nights: X
             * Subtotal: $XXX
           - Food & Dining:
             * Breakfast: $XX per day
             * Lunch: $XX per day
             * Dinner: $XX per day
             * Snacks/drinks: $XX per day
             * Subtotal: $XXX
           - Attractions & Activities:
             * Entrance fees: $XXX
             * Tours/experiences: $XXX
             * Subtotal: $XXX
           - Shopping & Miscellaneous:
             * Souvenirs: $XXX
             * Emergency fund: $XXX
             * Subtotal: $XXX
        
        2. TOTAL COST SUMMARY:
           - Estimated total: $XXXX
           - Daily average: $XXX
           - Per person (if group): $XXX
        
        3. BUDGET OPTIMIZATION TIPS:
           - Money-saving suggestions (e.g., "Use subway pass instead of taxis to save $XX")
           - Free/low-cost alternatives (e.g., "Visit free museums on Wednesdays")
           - Best value recommendations (e.g., "Lunch sets are 30% cheaper than dinner")
        
        4. BUDGET ALERTS:
           - If over budget: "[WARNING] Current plan exceeds budget by $XXX. Suggested adjustments: [list]"
           - If under budget: "[OK] Within budget with $XXX remaining for flexibility"
           - If tight budget: "[TIP] Consider these cost-cutting measures: [list]"
        
        5. PAYMENT TIPS:
           - Currency exchange recommendations
           - Credit card vs cash suggestions
           - Tipping customs
        
        Keep the analysis clear, actionable, and realistic.
        
        Then send back:
        1. Call send_event with event_name="budget.analyzed", destination_id="coordinator"
        2. In payload, include: project_id (copy from payload), budget_analysis (your detailed analysis as text), itinerary (copy from payload)
        3. Call finish()

mods:
  - name: "openagents.mods.workspace.default"
    enabled: true

connection:
  host: "localhost"
  port: 8700
  transport: "grpc"
